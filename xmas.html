# xmas.py
import textwrap, datetime, os

H = 18                      # æ ‘é«˜ï¼ˆå¯æ”¹ï¼‰
STAR = 'ğŸŒŸ'
LEAF = 'ğŸŸ¢'                 # å¯æ¢ â–² â— ğŸ„
TRUNK = 'ğŸŸ¤'
SNOW_CNT = 80               # é›ªèŠ±æ•°é‡

# 1. ç”Ÿæˆæ ‘
tree_lines = []
tree_lines.append(' ' * (H - 1) + STAR)
for i in range(H):
    tree_lines.append(' ' * (H - i - 1) + LEAF * (2 * i + 1))
for _ in range(2):
    tree_lines.append(' ' * (H - 2) + TRUNK * 3)

tree = '\n'.join(tree_lines)

# 2. å¥—è¿›å¸¦é›ªèŠ±åŠ¨ç”»çš„ HTML
html_tmpl = textwrap.dedent(r'''
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Christmas Tree</title>
<style>
    body{background:#000;color:#fff;font-family:monospace;font-size:20px;
         display:flex;justify-content:center;align-items:center;height:100vh;margin:0;overflow:hidden;}
    pre{line-height:1.2em;letter-spacing:6px;}
    /* é›ªèŠ± */
    .snow{position:fixed;top:-10px;font-size:14px;color:#fff;user-select:none;animation:fall linear infinite;}
    @keyframes fall{to{transform:translateY(100vh) rotate(360deg);}}
</style>
</head>
<body>
<pre>{{TREE}}</pre>

<script>
// åŠ¨æ€é›ªèŠ±
function snow(){
  const s = document.createElement('div');
  s.className = 'snow';
  s.innerHTML = 'â„';
  s.style.left = Math.random()*100+'%';
  s.style.animationDuration = 2+Math.random()*3+'s';
  s.style.opacity = Math.random();
  document.body.appendChild(s);
  setTimeout(()=>s.remove(), 6000);
}
setInterval(snow, 150);
</script>
</body>
</html>
''').strip()

with open('xmas.html', 'w', encoding='utf-8') as f:
    f.write(html_tmpl.replace('{{TREE}}', tree))

print('âœ… å·²ç”Ÿæˆ xmas.htmlï¼Œå¤§å°', os.path.getsize('xmas.html'), 'å­—èŠ‚')
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<title>åœ£è¯å¿«ä¹</title>
<style>
body {
    margin: 0;
    background: linear-gradient(45deg, #001845, #000, #2a0045, #000);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    color: #fff;
    font-family: Consolas, monospace;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

pre {
    line-height: 1.5em;
    font-size: 22px;
    text-shadow: 0 0 3px #2e7d32, 0 0 8px #2e7d32; /* Base green glow for the whole tree */
    text-align: center;
}

.leaf {
    color: #2a9d8f; /* A nice shade of green for non-light leaves */
}

#star {
    display: inline-block;
    animation: twinkle 1.5s infinite;
}

@keyframes twinkle {
    0%, 100% { transform: scale(1); text-shadow: 0 0 10px #ffdd00, 0 0 20px #ffdd00; }
    50% { transform: scale(1.2); text-shadow: 0 0 20px #ffdd00, 0 0 40px #ffdd00; }
}

.light {
    animation: blink 2s infinite;
}
@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}
.c1 { color: #ffadad; text-shadow: 0 0 5px #ffadad; }
.c2 { color: #ffd6a5; text-shadow: 0 0 5px #ffd6a5; }
.c3 { color: #fdffb6; text-shadow: 0 0 5px #fdffb6; }
.c4 { color: #caffbf; text-shadow: 0 0 5px #caffbf; }
.c5 { color: #9bf6ff; text-shadow: 0 0 5px #9bf6ff; }
.c6 { color: #a0c4ff; text-shadow: 0 0 5px #a0c4ff; }
.c7 { color: #bdb2ff; text-shadow: 0 0 5px #bdb2ff; }

#wish {
    color: #ffd166;
    margin-top: 30px;
    font-size: 26px;
    letter-spacing: 3px;
    font-family: 'KaiTi', 'SimSun', sans-serif;
    text-shadow: 0 0 5px #ffd166, 0 0 10px #ffd166;
    animation: fadeIn 3s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.snow {
    position: fixed;
    top: -10px;
    color: #fff;
    animation: fall linear infinite;
    text-shadow: 0 0 3px #fff;
}
@keyframes fall {
    to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
    }
}
</style>
</head>
<body>
<pre id="tree"></pre>
<div id="wish"></div>

<script>
/* ===== åœ¨è¿™é‡Œä¿®æ”¹ä½ çš„ç¥ç¦è¯­ ===== */
const myWish = "æœ±å¹¿å®‡ï¼Œæ„¿ä½ è¢«è¿™ä¸ªä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼Œå¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ï¼";

/* ===== åœ£è¯æ ‘å‚æ•° ===== */
const H = 20; // æ ‘çš„é«˜åº¦
const STAR = 'â­';
const LEAF = '*'; // ä½¿ç”¨ '*' ä½œä¸ºå¶å­å›¾æ¡ˆ
const TRUNK = 'â”ƒ';
const LIGHT_CHANCE = 0.15; // å½©ç¯å‡ºç°çš„æ¦‚ç‡
const lightColors = ['c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7'];

/* ===== 1. é¦–å…ˆï¼Œç”Ÿæˆä¸€ä¸ªçº¯æ–‡æœ¬çš„ã€å®Œç¾å¯¹é½çš„åœ£è¯æ ‘ ===== */
let treeText = '';

// æ ‘é¡¶çš„æ˜Ÿæ˜Ÿ
treeText += ' '.repeat(H) + STAR + '\n';

// æ ‘å¶éƒ¨åˆ†
for (let i = 1; i <= H; i++) {
  const leaves = LEAF.repeat(2 * i - 1);
  treeText += ' '.repeat(H - i) + leaves + '\n';
}

// æ ‘å¹²éƒ¨åˆ†
for (let _ = 0; _ < 3; _++) {
    treeText += ' '.repeat(H - 1) + TRUNK.repeat(1) + '\n';
}
// æ ‘åº•åº§
treeText += ' '.repeat(H - 2) + 'â•°â•®â•°â•®\n';


/* ===== 2. ç„¶åï¼Œå°†çº¯æ–‡æœ¬æ ‘â€œè£…é¥°â€æˆå¸¦æœ‰HTMLæ ·å¼çš„ç‰ˆæœ¬ ===== */
let treeHTML = '';
const lines = treeText.split('\n');

// å•ç‹¬å¤„ç†ç¬¬ä¸€è¡Œï¼Œä¸ºæ˜Ÿæ˜Ÿæ·»åŠ åŠ¨ç”»
const starLine = lines[0];
treeHTML += starLine.replace(STAR, "<span id=\"star\">${STAR}</span>") + '\n';

// å¤„ç†å‰©ä¸‹çš„æ¯ä¸€è¡Œ
for (let i = 1; i < lines.length; i++) {
    let decoratedLine = '';
    for (const char of lines[i]) {
        // å¦‚æœå­—ç¬¦æ˜¯å¶å­ï¼Œä¸”éšæœºæ•°æ»¡è¶³æ¡ä»¶ï¼Œåˆ™å°†å…¶å˜ä¸ºå½©ç¯
        if (char === LEAF && Math.random() < LIGHT_CHANCE) {
            const colorClass = lightColors[Math.floor(Math.random() * lightColors.length)];
            decoratedLine += `<span class="light ${colorClass}">${LEAF}</span>`;
        } 
        // å¦‚æœåªæ˜¯æ™®é€šçš„å¶å­ï¼Œç»™å®ƒä¸€ä¸ªåŸºç¡€çš„å¶å­æ ·å¼
        else if (char === LEAF) {
            decoratedLine += `<span class="leaf">${LEAF}</span>`;
        }
        // å…¶ä»–å­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ã€æ ‘å¹²ï¼‰ä¿æŒåŸæ ·
        else {
            decoratedLine += char;
        }
    }
    treeHTML += decoratedLine + '\n';
}

// å°†è£…é¥°å¥½çš„HTMLå†…å®¹æ”¾å…¥é¡µé¢å…ƒç´ ä¸­
document.getElementById('tree').innerHTML = treeHTML;
document.getElementById('wish').textContent = `ğŸ’Œ ${myWish}`;

/* ===== é›ªèŠ±æ•ˆæœ (æ— éœ€æ”¹åŠ¨) ===== */
const snowflakeChars = ['â„ï¸', 'â†', 'â…', 'âˆ'];
setInterval(() => {
    const s = document.createElement('div');
    s.className = 'snow';
    s.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
    s.style.left = Math.random() * 100 + 'vw';
    s.style.animationDuration = (Math.random() * 5 + 5) + 's';
    s.style.opacity = Math.random();
    s.style.fontSize = Math.random() * 10 + 10 + 'px';
    s.style.animationDelay = Math.random() * 5 + 's';

    document.body.appendChild(s);
    setTimeout(() => s.remove(), 10000);
}, 150);
</script>
</body>
</html>